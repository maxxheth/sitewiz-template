<IfModule mod_rewrite.c>
    RewriteEngine On

    # Redirect to remove .html extension
    RewriteCond %{THE_REQUEST} \s/+(.+?)\.html[\s?] [NC]
    RewriteRule ^ %1 [R=301,L]

    # Internally rewrite URL to add .html extension
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_URI}.html -f
    RewriteRule ^(.+)$ $1.html [L]

    # Handle 404 errors gracefully
    ErrorDocument 404 /404.html
</IfModule>